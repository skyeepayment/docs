<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Welcome file</title>
  <link rel="stylesheet" href="https://stackedit.io/style.css" />
</head>

<body class="stackedit">
  <div class="stackedit__html"><h1 id="skyee-accommodation--tuition-integration-guide-offline-bank-transfer">Skyee Accommodation / Tuition Integration Guide (Offline Bank Transfer)</h1>
<blockquote>
<p>Note: This guide is intended to be used for integration with Skyee’s Accommodation/Tuition collection service via Offline Bank Transfer.</p>
</blockquote>
<p>If you intend to integrate Skyee’s collection service into your website, you will need to do the following steps:</p>
<ol>
<li>Acquire a merchantId from Skyee’s account manager.</li>
<li>Acquire an appId from Skyee’s account manager.</li>
<li>Get a certificate key from Skyee so you can verify the message signature sent by Skyee.</li>
<li>Issue a certificate key to Skyee so Skyee can verify the message signature sent with your request.</li>
</ol>
<p>With the above information ready, a general payment process would be like:</p>
<ol>
<li>You use all the information that you are given to create a link, where your payer will click and be brought to a Skyee hosted web page. Link format is like the following:</li>
</ol>
<pre><code>https://pay.skyeepayment.com/?merchantId=123&amp;appid=984342&amp;ordernumber=12345-12345767-12345677&amp;ordertime=15583942134&amp;payType=2&amp;c1=GBP&amp;c2=CNY&amp;amt1=1023111&amp;amt2=9484213&amp;sig=URgwbxHfL%2FE3YNiIBpP0vbL1UPtvbsqfAvGMpLFo5nIW2Bq786Mi0uLrvsI
</code></pre>
<ol start="2">
<li>Within the Skyee hosted web page, Skyee will display the following information to the payer:</li>
</ol>
<ul>
<li>Order number from the merchant</li>
<li>Payment amount in its original currency</li>
<li>Payment amount to be collected in CNY format</li>
<li>Time the order was created<br>
The payer will be asked to provide all necessary information on the page and submit all files.</li>
</ul>
<ol start="3">
<li>Once everything submitted, Skyee will display the account detail which can serve as the payee account for the payer transfer fund to. As this is an offline bank transfer, Skyee will also generate and display a PIN code which the payer MUST put together with the transfer in the comment or note field, for Skyee to identify the payment. A Unique Pin code will be associated with an order from the merchant and the PIN code will expire in 48 hours, which should be enough for the payer to complete the bank transfer.</li>
</ol>
<h2 id="parameter-details">Parameter details:</h2>
<pre><code>https://pay.skyeepayment.com/?merchantId=123&amp;appid=984342&amp;ordernumber=12345-12345767-12345677&amp;ordertime=15583942134&amp;payType=2&amp;c1=GBP&amp;c2=CNY&amp;amt1=1023111&amp;amt2=9484213&amp;sig=URgwbxHfL%2FE3YNiIBpP0vbL1UPtvbsqfAvGMpLFo5nIW2Bq786Mi0uLrvsI
</code></pre>
<ul>
<li>merchantId: a unique ID given by Skyee to identify the merchant</li>
<li>appid: each accommodation company’s ID, issued after KYCC done</li>
<li>ordernumber: the merchant’s order number</li>
<li>ordertime: when is this order created, UTC. Timestamp, e.g. 15583942134</li>
<li>payType: 2 means offline bank transfer</li>
<li>c1: Original currency in GBP/USD/AUD/NZD/EUR</li>
<li>c2: Collection currency which will be CNY</li>
<li>amt1: Original amount to display to the student<br>
amt2: CNY collection amount which Skyee will collect from the student<br>
sig: Signature encrypted using the following information</li>
</ul>
<pre><code>mid=123&amp;appid=984342&amp;ordernumber=12345-12345767-12345677&amp;ordertime=15583942134&amp;paytype=2&amp;c1=GBP&amp;c2=CNY&amp;amt1=1023111&amp;amt2=9484213
</code></pre>
<p>Make sure you have all fields combined in the string even when they don’t have a value</p>
<h2 id="notification">Notification:</h2>
<p>Skyee needs a URL endpoint which Skyee could send payment notification to. It’s a POST request to inform the merchant of the payment status, a code sample would be like following:</p>
<pre><code>POST "notificationUrl" HTTP/1.1 Content-Type: application/x-www-form-urlencoded

merchantId=8731769123&amp;appId=758353&amp;payType=2&amp;ordernumber=12345-12345767-12345677&amp;ordertime=15583942134&amp;orderstatus=paid&amp;sig=URgwbxHfL%2FE3YNiIBpP0vbL1UPtvbsqfAvGMpLFo5nIW2Bq786Mi0uLrvsI
</code></pre>
<p>In the POST, the following parameters will be sent:</p>
<ul>
<li>merchantId</li>
<li>appId</li>
<li>paytype</li>
<li>ordernumber</li>
<li>ordertime</li>
<li>orderstatus</li>
<li>sig</li>
</ul>
<p>For order status<br>
For order status:</p>
<ul>
<li>paid: the amount of CNY has been well received.</li>
<li>paymentfailed: within 48 hours the payment is not received, please be noted the notifiction itself may be sent after 48 hours timeframe.</li>
<li>refund: for some reason Skyee has to make a refund to the student</li>
<li>paymentsent: the payment has been sent to the merchant</li>
</ul>
</div>
</body>

</html>
